(function(o,c){typeof exports=="object"&&typeof module!="undefined"?c(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],c):(o=typeof globalThis!="undefined"?globalThis:o||self,c(o.index={},o.Vue))})(this,function(o,c){"use strict";function y(s,l=0,p={}){return l++,s.reduce((f,r)=>{const i={...r};if(i.level=l,l>1&&p&&(i.parentId=p.id),i.children){const u=y(i.children,l,i);return delete i.children,f.concat(i,u)}else return i.isLeaf=!0,f.concat(i)},[])}function b(s){const l=c.ref(y(c.unref(s))),p=t=>{const n=l.value.find(e=>e.id===t.id);n&&(n.expanded=!n.expanded)},f=c.computed(()=>{let t=[];const n=[];for(const e of l.value)t.includes(e)||(e.expanded!==!0&&(t=r(e)),n.push(e));return n}),r=(t,n=!0)=>{const e=[],d=l.value.findIndex(a=>a.id===t.id);for(let a=d+1;a<l.value.length&&t.level<l.value[a].level;a++)(n||t.level===l.value[a].level-1)&&e.push(l.value[a]);return e},i=t=>l.value.find(e=>e.id===t.parentId),u=t=>{const n=i(t);if(!n)return;const e=r(n,!0),d=e.every(h=>h.checked);n.checked=d;const a=e.some(h=>h.checked);d?n.inChecked=!1:a?n.inChecked=!0:n.inChecked=!1,n.parentId&&u(n)},x=t=>{t.checked=!t.checked,t.inChecked=!1,r(t).forEach(n=>{n.checked=t.checked}),u(t)},g=(t,n=[])=>{const e=r(t,!1);return n.push(...e),e.forEach(d=>{d.expanded&&g(d,n)}),n};return{innerData:l,toggleNode:p,expandedTree:f,getChildren:r,toggleCheckNode:x,getChildrenExpanded:g}}const C={data:{type:Object,required:!0},checkable:{type:Boolean,default:!1},lineable:{type:Boolean,default:!1},operable:{type:Boolean,default:!1}};var k=c.defineComponent({name:"Tree",props:C,setup(s,{slots:l}){const{data:p,checkable:f,lineable:r}=c.toRefs(s),i=24,u=28,{expandedTree:x,toggleNode:g,getChildrenExpanded:t,toggleCheckNode:n}=b(p);return()=>c.createVNode("div",{class:"ly-tree"},[x.value.map(e=>{const{level:d,isLeaf:a,expanded:h}=e;return c.createVNode("div",{class:"ly-tree-node hover:bg-slate-300 relative leading-8 flex items-center",style:{paddingLeft:`${i*(d-1)}px`}},[!a&&h&&r&&c.createVNode("span",{class:"ly-tree-node__vine absolute w-px bg-slate-300",style:{height:`${u*t(e).length}px`,left:`${i*(d-1)+8}px`,top:`${u}px`}},null),a?c.createVNode("span",{style:{display:"inline-block",width:"18px"}},null):l.icon?l.icon({nodeData:e,toggleNode:g}):c.createVNode("svg",{onClick:()=>g(e),style:{width:"18px",height:"18px",display:"inline-block",transform:h?"rotate(90deg)":""},viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[c.createVNode("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null)]),f.value&&c.createVNode("span",{class:`relative ${e.inChecked?"ly-tree__inChecked":""}`},[e.inChecked&&c.createVNode("span",{class:"ly-tree-checkbox__inner cursor-pointer",onClick:()=>n(e)},[c.createTextVNode("-")]),c.withDirectives(c.createVNode("input",{type:"checkbox",style:{marginRight:"8px"},"onUpdate:modelValue":m=>e.checked=m,onClick:()=>n(e)},null),[[c.vModelCheckbox,e.checked]])]),l.content?l.content(e):e.label])})])}}),v={install(s){s.component(k.name,k)}};o.Tree=k,o.default=v,Object.defineProperties(o,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
